<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Yunoxa - Checkout</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Online Shopping in Sri Lanka" name="keywords">
    <meta content="Yunoxa - Best Online Shopping Platform in Sri Lanka" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/checkout.css" rel="stylesheet">
</head>

<body>
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home nav-icon"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fas fa-search nav-icon"></i>
            <span>Search</span>
        </a>
        <a href="index.html" class="nav-item">
            <i class="fas fa-gift nav-icon"></i>
            <span>Deals</span>
        </a>
        <a href="cart.html" class="nav-item">
            <i class="fas fa-shopping-cart nav-icon"></i>
            <span>Cart</span>
        </a>
    </nav>
    <div class="user-info" style="text-align: right; padding: 10px; background: #f5f5f5;">
        <span id="user-email"></span>
        <button id="logout-btn" style="margin-left: 10px; padding: 5px 10px;">Logout</button>
      </div>
    <!-- Checkout Content -->
    <div class="checkout-container">
        <div class="checkout-header">
            <h1><i class="fas fa-lock"></i> Secure Checkout</h1>
            <div class="checkout-progress">
                <div class="progress-step" id="step-shipping">1. Shipping</div>
                <div class="progress-step" id="step-payment">2. Payment</div>
                <div class="progress-step" id="step-review">3. Review</div>
            </div>
        </div>

        <div class="checkout-body">
            <div class="checkout-main">
                <!-- Shipping Address Section -->
                <section class="checkout-section" id="shipping-section">
                    <h2><i class="fas fa-truck"></i> Shipping Address</h2>
                    <div class="address-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" placeholder="Enter first name" required>
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" placeholder="Enter last name" required>
                                <div class="error-message"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="address">Address *</label>
                            <input type="text" id="address" placeholder="Street address" required>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="address2">Address 2 (Optional)</label>
                            <input type="text" id="address2" placeholder="Apartment, suite, etc.">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">City *</label>
                                <input type="text" id="city" placeholder="Enter city" required>
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label for="province">Province *</label>
                                <select id="province" required>
                                    <option value="">Select province</option>
                                    <option value="western">Western Province</option>
                                    <option value="central">Central Province</option>
                                    <option value="southern">Southern Province</option>
                                    <option value="northern">Northern Province</option>
                                    <option value="eastern">Eastern Province</option>
                                    <option value="nw">North Western Province</option>
                                    <option value="nc">North Central Province</option>
                                    <option value="uva">Uva Province</option>
                                    <option value="sabaragamuwa">Sabaragamuwa Province</option>
                                </select>
                                <div class="error-message"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="postalCode">Postal Code *</label>
                                <input type="text" id="postalCode" placeholder="Enter postal code" required>
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number *</label>
                                <input type="tel" id="phone" placeholder="Enter phone number" required>
                                <div class="error-message"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Shipping Method Section -->
                <section class="checkout-section" id="shipping-method-section">
                    <h2><i class="fas fa-shipping-fast"></i> Shipping Method</h2>
                    <div class="shipping-methods">
                        <div class="shipping-method selected">
                            <div class="method-radio">
                                <input type="radio" name="shipping" id="standard" checked>
                                <label for="standard"></label>
                            </div>
                            <div class="method-info">
                                <h3>Standard Shipping</h3>
                                <p>Estimated delivery: 5-7 business days</p>
                                <p class="shipping-rate">LKR 250 per item</p>
                            </div>
                            <div class="method-price">Calculated at checkout</div>
                        </div>
                        <div class="shipping-method">
                            <div class="method-radio">
                                <input type="radio" name="shipping" id="express">
                                <label for="express"></label>
                            </div>
                            <div class="method-info">
                                <h3>Express Shipping</h3>
                                <p>Estimated delivery: 2-3 business days</p>
                                <p class="shipping-rate">LKR 400 per item</p>
                            </div>
                            <div class="method-price">Calculated at checkout</div>
                        </div>
                    </div>
                </section>

                <!-- Payment Section (initially hidden) -->
                <section class="checkout-section" id="payment-section" style="display: none;">
                    <h2><i class="fas fa-credit-card"></i> Payment Method</h2>
                    <div class="payment-methods">
                        <div class="payment-method selected">
                            <div class="method-radio">
                                <input type="radio" name="payment" id="creditCard" checked>
                                <label for="creditCard"></label>
                            </div>
                            <div class="method-info">
                                <h3>Credit/Debit Card</h3>
                                <div class="card-icons">
                                    <img src="https://cdn-icons-png.flaticon.com/512/196/196578.png" alt="Visa">
                                    <img src="https://cdn-icons-png.flaticon.com/512/196/196561.png" alt="Mastercard">
                                </div>
                            </div>
                        </div>
                        <div class="payment-method">
                            <div class="method-radio">
                                <input type="radio" name="payment" id="paypal">
                                <label for="paypal"></label>
                            </div>
                            <div class="method-info">
                                <h3>PayPal</h3>
                                <img src="https://cdn-icons-png.flaticon.com/512/174/174861.png" alt="PayPal" class="paypal-icon">
                            </div>
                        </div>
                        <div class="payment-method">
                            <div class="method-radio">
                                <input type="radio" name="payment" id="cod">
                                <label for="cod"></label>
                            </div>
                            <div class="method-info">
                                <h3>Cash on Delivery</h3>
                                <p>Pay when you receive your order</p>
                            </div>
                        </div>
                    </div>

                    <!-- Credit Card Form (shown when credit card is selected) -->
                    <div class="credit-card-form">
                        <div class="form-group">
                            <label for="cardNumber">Card Number *</label>
                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="cardName">Name on Card *</label>
                            <input type="text" id="cardName" placeholder="Enter name as it appears on card" required>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="expiry">Expiry Date *</label>
                                <input type="text" id="expiry" placeholder="MM/YY" required>
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV *</label>
                                <input type="text" id="cvv" placeholder="123" required>
                                <div class="error-message"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="checkout-actions">
                        <button class="btn-back" id="back-to-shipping"><i class="fas fa-arrow-left"></i> Back to Shipping</button>
                        <button class="btn-continue" id="continue-to-review">Continue to Review</button>
                    </div>
                </section>

                <!-- Review Section (initially hidden) -->
                <section class="checkout-section" id="review-section" style="display: none;">
                    <h2><i class="fas fa-check-circle"></i> Review Your Order</h2>
                    
                    <div class="review-section">
                        <h3><i class="fas fa-truck"></i> Shipping Information</h3>
                        <div class="review-info" id="review-shipping">
                            <!-- Dynamically filled with shipping info -->
                        </div>
                    </div>
                    
                    <div class="review-section">
                        <h3><i class="fas fa-credit-card"></i> Payment Method</h3>
                        <div class="review-info" id="review-payment">
                            <!-- Dynamically filled with payment info -->
                        </div>
                    </div>
                    
                    <div class="checkout-actions">
                        <button class="btn-back" id="back-to-payment"><i class="fas fa-arrow-left"></i> Back to Payment</button>
                        <button class="btn-confirm" id="confirm-order">Confirm Order</button>
                    </div>
                </section>

                <div class="checkout-actions" id="initial-actions">
                    <a href="cart.html" class="back-to-cart"><i class="fas fa-arrow-left"></i> Back to Cart</a>
                    <button class="btn-continue" id="continue-to-payment">Continue to Payment</button>
                </div>
            </div>

            <div class="checkout-sidebar">
                <div class="order-summary">
                    <h2><i class="fas fa-shopping-bag"></i> Order Summary</h2>
                    <div class="order-items">
                        <!-- Items will be dynamically inserted here -->
                        <div class="order-item">
                            <div class="item-image">
                                <img src="https://via.placeholder.com/60" alt="Product">
                            </div>
                            <div class="item-details">
                                <h3>Loading...</h3>
                                <p>Loading...</p>
                                <div class="item-price">LKR 0.00</div>
                                <div class="item-quantity">Qty: 1</div>
                            </div>
                        </div>
                        <div class="order-item">
                            <div class="item-image">
                                <img src="https://via.placeholder.com/60" alt="Product">
                            </div>
                            <div class="item-details">
                                <h3>Loading...</h3>
                                <p>Loading...</p>
                                <div class="item-price">LKR 0.00</div>
                                <div class="item-quantity">Qty: 1</div>
                            </div>
                        </div>
                    </div>
                    <div class="order-totals">
                        <div class="total-row">
                            <span>Subtotal</span>
                            <span>LKR 0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Shipping</span>
                            <span>FREE</span>
                        </div>
                        <div class="total-row">
                            <span>Tax</span>
                            <span>LKR 0.00</span>
                        </div>
                        <div class="total-row discount">
                            <span>Discount</span>
                            <span>-LKR 0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Total</span>
                            <span>LKR 0.00</span>
                        </div>
                    </div>
                </div>

                <div class="promo-code">
                    <h3><i class="fas fa-tag"></i> Promo Code</h3>
                    <div class="promo-input">
                        <input type="text" placeholder="Enter promo code">
                        <button>Apply</button>
                    </div>
                </div>

                <div class="secure-checkout">
                    <p><i class="fas fa-lock"></i> Secure checkout</p>
                    <p><i class="fas fa-shield-alt"></i> Buyer protection</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>

    <!-- Checkout Script -->
    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'
        
        // Initialize Supabase
        const supabase = createClient(
          'https://qopdjgfciakmvhlriixt.supabase.co',
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvcGRqZ2ZjaWFrbXZobHJpaXh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk0NDA2NDAsImV4cCI6MjA1NTAxNjY0MH0.5UAelwww7WpDUExqhc5dH2JhUWlGNgUNjh8fzxPNZvs'
        )
      
        // Track verification state
        let verificationInProgress = false
        let verificationInterval
      
        // Enhanced verification with ban detection
        async function verifySession() {
          if (verificationInProgress) return
          
          verificationInProgress = true
          console.log('Starting session verification...')
      
          try {
            // 1. Check current session
            const { data: { session }, error: sessionError } = await supabase.auth.getSession()
            
            if (sessionError || !session) {
              throw new Error('No active session')
            }
      
            // 2. Verify user status - THIS DETECTS BANS
            const { data: { user }, error: userError } = await supabase.auth.getUser()
            
            if (userError) {
              // Specific check for banned users
              if (userError.message.includes('disabled') || userError.message.includes('banned')) {
                console.warn('User account is banned/disabled')
                await handleBan()
                return false
              }
              throw userError
            }
            
            if (!user) {
              throw new Error('User verification failed')
            }
      
            // 3. Update local storage
            localStorage.setItem('supabase_session', JSON.stringify({
              user: user,
              session: session
            }))
            
            // Update UI
            updateUserUI(user)
            
            console.log('Session verified successfully')
            return true
      
          } catch (error) {
            console.warn('Session verification failed:', error.message)
            await handleLogout()
            return false
          } finally {
            verificationInProgress = false
          }
        }
      
        // Special handling for banned users
        async function handleBan() {
          console.log('Processing ban...')
          try {
            // 1. Force logout from Supabase
            const { error } = await supabase.auth.signOut()
            if (error) console.error('Ban logout error:', error)
            
            // 2. Clear local data
            localStorage.removeItem('supabase_session')
            
            // 3. Show ban message
            alert('Your account has been restricted. Please contact support.')
            
            // 4. Redirect to login
            window.location.href = 'login.html'
          } catch (e) {
            console.error('Ban handling failed:', e)
            window.location.href = 'login.html'
          }
        }
      
        // Normal logout handler
        async function handleLogout() {
          try {
            await supabase.auth.signOut()
          } catch (e) {
            console.error('Logout error:', e)
          } finally {
            localStorage.removeItem('supabase_session')
            window.location.href = 'login.html'
          }
        }
      
        // Update UI elements
        function updateUserUI(user) {
          const emailElement = document.getElementById('user-email')
          if (emailElement) {
            emailElement.textContent = user.email || "User"
          }
          
          // Add any other UI updates here
        }
      
        // Initial verification on page load
        verifySession()
      
        // Setup periodic verification
        function setupPeriodicVerification() {
          // First check after 10 seconds
          setTimeout(async () => {
            await verifySession()
            
            // Subsequent checks every 60 seconds
            verificationInterval = setInterval(verifySession, 15 * 1000)
          }, 10 * 1000)
        }
      
        // Start the verification system
        setupPeriodicVerification()
      
        // Cleanup interval when page unloads
        window.addEventListener('beforeunload', () => {
          if (verificationInterval) {
            clearInterval(verificationInterval)
          }
        })
      
        // Manual logout handler
        document.getElementById('logout-btn')?.addEventListener('click', async () => {
          if (verificationInterval) {
            clearInterval(verificationInterval)
          }
          await handleLogout()
        })
      </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const continueToPaymentBtn = document.getElementById('continue-to-payment');
    const continueToReviewBtn = document.getElementById('continue-to-review');
    const confirmOrderBtn = document.getElementById('confirm-order');
    const backToShippingBtn = document.getElementById('back-to-shipping');
    const backToPaymentBtn = document.getElementById('back-to-payment');
    
    const shippingSection = document.getElementById('shipping-section');
    const shippingMethodSection = document.getElementById('shipping-method-section');
    const paymentSection = document.getElementById('payment-section');
    const reviewSection = document.getElementById('review-section');
    const initialActions = document.getElementById('initial-actions');
    
    const stepShipping = document.getElementById('step-shipping');
    const stepPayment = document.getElementById('step-payment');
    const stepReview = document.getElementById('step-review');
    
    // Calculate shipping cost based on method and number of items
    function calculateShippingCost(shippingMethod, itemCount) {
        if (shippingMethod === 'express') {
            return 400 * itemCount; // LKR 400 per product for express
        } else {
            return 250 * itemCount; // LKR 250 per product for standard
        }
    }

    // Update order summary with cart items and totals
    function updateOrderSummary() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const orderItemsContainer = document.querySelector('.order-items');
        const subtotalElement = document.querySelector('.total-row span:last-child');
        const shippingElement = document.querySelector('.total-row:nth-child(2) span:last-child');
        const discountElement = document.querySelector('.total-row.discount span:last-child');
        const totalElement = document.querySelector('.total-row.grand-total span:last-child');
        
        // Get selected shipping method
        const shippingMethod = document.querySelector('input[name="shipping"]:checked')?.id || 'standard';
        const shippingCost = calculateShippingCost(shippingMethod, cart.reduce((total, item) => total + item.quantity, 0));
        
        // Calculate totals
        let subtotal = 0;
        let totalDiscount = 0;
        
        orderItemsContainer.innerHTML = cart.map(item => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            const itemDiscount = (item.originalPrice - item.price) * item.quantity;
            totalDiscount += itemDiscount;
            
            return `
                <div class="order-item">
                    <div class="item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        ${item.discount && item.discount !== "0" ? `<p>Discount: ${item.discount}%</p>` : ''}
                        <div class="item-price">LKR ${itemTotal.toFixed(2)}</div>
                        <div class="item-quantity">Qty: ${item.quantity}</div>
                    </div>
                </div>
            `;
        }).join('');
        
        // Update totals
        subtotalElement.textContent = `LKR ${subtotal.toFixed(2)}`;
        shippingElement.textContent = shippingCost === 0 ? 'FREE' : `LKR ${shippingCost.toFixed(2)}`;
        
        if (totalDiscount > 0) {
            discountElement.textContent = `-LKR ${totalDiscount.toFixed(2)}`;
            discountElement.parentElement.style.display = 'flex';
        } else {
            discountElement.parentElement.style.display = 'none';
        }
        
        const total = subtotal + shippingCost;
        totalElement.textContent = `LKR ${total.toFixed(2)}`;
        
        // Update shipping method prices
        document.querySelectorAll('.method-price').forEach(el => {
            const methodId = el.closest('.shipping-method').querySelector('input').id;
            const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
            const cost = calculateShippingCost(methodId, itemCount);
            el.textContent = cost === 0 ? 'FREE' : `LKR ${cost.toFixed(2)}`;
        });
    }

    // Form validation function
    function validateShippingForm() {
        let isValid = true;
        const requiredFields = [
            'firstName', 'lastName', 'address', 
            'city', 'province', 'postalCode', 'phone'
        ];
        
        requiredFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            const errorMsg = field.parentElement.querySelector('.error-message');
            
            if (!field.value.trim()) {
                errorMsg.textContent = 'This field is required';
                isValid = false;
            } else {
                errorMsg.textContent = '';
            }
        });
        
        return isValid;
    }
    
    // Function to update review sections with entered information
    function updateReviewSections() {
        // Shipping info
        const shippingInfo = `
            <p>${document.getElementById('firstName').value} ${document.getElementById('lastName').value}</p>
            <p>${document.getElementById('address').value}</p>
            ${document.getElementById('address2').value ? `<p>${document.getElementById('address2').value}</p>` : ''}
            <p>${document.getElementById('city').value}, ${document.getElementById('province').value}</p>
            <p>${document.getElementById('postalCode').value}</p>
            <p>Phone: ${document.getElementById('phone').value}</p>
            <p>Shipping Method: ${document.querySelector('input[name="shipping"]:checked + label').parentElement.parentElement.querySelector('h3').textContent}</p>
        `;
        document.getElementById('review-shipping').innerHTML = shippingInfo;
        
        // Payment info
        const paymentMethod = document.querySelector('input[name="payment"]:checked').id;
        let paymentInfo = '';
        
        if (paymentMethod === 'creditCard') {
            paymentInfo = `
                <p>Credit Card ending in ${document.getElementById('cardNumber').value.slice(-4)}</p>
                <p>Expires: ${document.getElementById('expiry').value}</p>
            `;
        } else if (paymentMethod === 'paypal') {
            paymentInfo = `<p>PayPal</p>`;
        } else {
            paymentInfo = `<p>Cash on Delivery</p>`;
        }
        
        document.getElementById('review-payment').innerHTML = paymentInfo;
    }
    
    // Initialize the order summary
    updateOrderSummary();
    
    // Handle shipping method selection
    const shippingMethods = document.querySelectorAll('.shipping-method');
    shippingMethods.forEach(method => {
        method.addEventListener('click', function() {
            shippingMethods.forEach(m => m.classList.remove('selected'));
            this.classList.add('selected');
            this.querySelector('input').checked = true;
            updateOrderSummary();
        });
    });

    // Handle payment method selection
    const paymentMethods = document.querySelectorAll('.payment-method');
    paymentMethods.forEach(method => {
        method.addEventListener('click', function() {
            paymentMethods.forEach(m => m.classList.remove('selected'));
            this.classList.add('selected');
            this.querySelector('input').checked = true;
        });
    });

    // Continue to Payment Button
    continueToPaymentBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        if (validateShippingForm()) {
            // Hide shipping sections
            shippingSection.style.display = 'none';
            shippingMethodSection.style.display = 'none';
            initialActions.style.display = 'none';
            
            // Show payment section
            paymentSection.style.display = 'block';
            
            // Update progress steps
            stepShipping.classList.remove('active');
            stepPayment.classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
    });
    
    // Back to Shipping Button
    backToShippingBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Show shipping sections
        shippingSection.style.display = 'block';
        shippingMethodSection.style.display = 'block';
        initialActions.style.display = 'flex';
        
        // Hide payment section
        paymentSection.style.display = 'none';
        
        // Update progress steps
        stepPayment.classList.remove('active');
        stepShipping.classList.add('active');
        
        // Scroll to top
        window.scrollTo(0, 0);
    });
    
    // Continue to Review Button
    continueToReviewBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Validate payment form if credit card is selected
        const paymentMethod = document.querySelector('input[name="payment"]:checked').id;
        
        if (paymentMethod === 'creditCard') {
            let isValid = true;
            const requiredFields = ['cardNumber', 'cardName', 'expiry', 'cvv'];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorMsg = field.parentElement.querySelector('.error-message');
                
                if (!field.value.trim()) {
                    errorMsg.textContent = 'This field is required';
                    isValid = false;
                } else {
                    errorMsg.textContent = '';
                }
            });
            
            if (!isValid) return;
        }
        
        // Update review sections with entered information
        updateReviewSections();
        
        // Hide payment section
        paymentSection.style.display = 'none';
        
        // Show review section
        reviewSection.style.display = 'block';
        
        // Update progress steps
        stepPayment.classList.remove('active');
        stepReview.classList.add('active');
        
        // Scroll to top
        window.scrollTo(0, 0);
    });
    
    // Back to Payment Button
    backToPaymentBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Show payment section
        paymentSection.style.display = 'block';
        
        // Hide review section
        reviewSection.style.display = 'none';
        
        // Update progress steps
        stepReview.classList.remove('active');
        stepPayment.classList.add('active');
        
        // Scroll to top
        window.scrollTo(0, 0);
    });
    
    // Confirm Order Button
    confirmOrderBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Show loading state
        confirmOrderBtn.disabled = true;
        confirmOrderBtn.innerHTML = 'Processing... <i class="fas fa-spinner fa-spin"></i>';
        
        // Simulate order processing
        setTimeout(function() {
            alert('Order confirmed! Thank you for your purchase.');
            
            // Clear cart after successful order
            localStorage.removeItem('cart');
            
            // Redirect to order confirmation page
            window.location.href = 'order-confirmation.html';
        }, 1500);
    });
});


    </script>
</body>
</html>